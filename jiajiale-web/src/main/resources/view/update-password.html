<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>修改密码</title>
</head>
<body>
	<article>
		<header>
			<h1>修改密码</h1>
		</header>
		<form>
			<p>
				<label>旧密码:<input v-model="formdata.oldPassword"></label>
			</p>
			<p>
				<label>新密码:<input v-model="formdata.newPassword"></label>
			</p>
			<p>
				<label>新密码确认:<input v-model="formdata.newPasswordConfirm"></label>
			</p>
			<p>
				<button type="button" @click="submit">确定</button>
				<a href="welcome.html">返回</a>
			</p>
		</form>
	</article>
	<script src="/js/axios.min.js"></script>
	<script src="/js/vue.js"></script>
    <script src="/js/yi.toast.js"></script>
	<script>
        const app=new Vue({
            el:"body>article",
            data:{
                formdata:{}
            },
            methods:{
                submit:function () {
                    const uid=sessionStorage.getItem("uid");
                    axios.patch(`/api/user/${uid}`,this.formdata)
                        .then(resp=>{
                            if (resp.code !== "ok") {
                                toast(resp.message);
                                return;
                            }
                            alert("修改密码成功,请重新登录");
                            window.top.location.href = "/login.html";
                        })
                }
            }    
        });

	</script>

</body>
</html>