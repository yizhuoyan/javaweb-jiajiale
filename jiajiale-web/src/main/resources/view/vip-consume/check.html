<!DOCTYPE html>
<html>
<head>
<title>查看客户消费记录</title>

</head>
<body>
	<header>
		<h1>查看客户消费记录详情</h1>
	</header>
	<main>
		 <p>
            <label>手机号:<input v-model="e.mobile" ></label>
        </p>
        <p>
            <label>
            	会员等级:<input v-model="e.rankName" >
            </label>
        </p>
        <p>
            <label>*姓名:<input v-model="e.vipName" ></label>
        </p>
        <p>
            <label>消费金额(元):<input v-model="e.consumeMoney" ></label>
        </p>
        <p>
            <label>消费时间:<input type="datetime"  v-model="e.consumeTime"></label>
        </p>
      	<p>
            <label>实际付款(元):<input v-model="e.actualPayMoney"></label>
        </p>
        <p>
            <label>优惠金额(元):<input  v-model="e.discountMoney"></label>
        </p>
         <p>
            <label>关联订单:<input v-model="e.orderId" ></label>
        </p>
        <p>
            <label>录入人:<input v-model="e.createUserName" ></label>
        </p>
        <p>
            <label>享受折扣:<input v-model="e.enjoyDiscount" ></label>
        </p>
        <p>
            <label>备注:<textarea v-model="e.remark"></textarea></label>
        </p>
        <p>
            <button @click="remove">删除</button>
            <a href="/vip-consume/list.html">返回</a>	
        </p>
	</main>
	

	 <script
		src="/js/yi.toast.js"></script>
		<script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
		
		<script>
            const id=location.hash.substr(1);
			const app=new Vue({
				el:"main",
				data:{
					e:{
						id:id
					}
					
				},
				methods:{
					remove:function(){

                        axios.delete(`/api/vipconsume/${id}`)
                            .then(resp=>{
                                if(resp.code!=="ok"){
                                    toast(resp.message);
                                }else{
                                    toast("删除成功");
                                    setTimeout(function(){
                                        window.location.href="/vip-consume/list.html";
                                    },500);

                                }
                            });

					}
				},
				created:function(){
					//只读所有input

					document.querySelectorAll("input")
                        .forEach(t=>t.disabled=true);

					axios.get(`/vipconsume/${id}`).then(resp=>{
						if(resp.code!=="ok"){
							toast(resp.message);
						}else{
							//console.log(resp);
							app.e=resp.data;
						}
					});
					
				}
			});
		
		</script>
</body>
</html>